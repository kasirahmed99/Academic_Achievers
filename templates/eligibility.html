{% extends "base.html" %}
{% block title %}Eligibility Checker – Academic Achievers{% endblock %}

{% block content %}
<div class="form-page" style="max-width: 720px;">
    <div class="section-header">
        <div class="section-title">Eligibility checker</div>
        <div class="section-sub">
            Choose a country, level and optional GPA to see matching scholarships.
        </div>
    </div>

    <div class="form-card">
        <form method="post">
            <div class="form-group">
                <label class="form-label" for="country">Country</label>
                <select class="form-select" id="country" name="country">
                    <option value="">Any country</option>
                    {% for c in countries %}
                        <option value="{{ c }}">{{ c }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label class="form-label" for="level">Level</label>
                <select class="form-select" id="level" name="level">
                    <option value="">Any level</option>
                    {% for l in levels %}
                        <option value="{{ l }}">{{ l }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label class="form-label" for="gpa">Your GPA (optional)</label>
                <input class="form-input" type="number" step="0.01" id="gpa" name="gpa" placeholder="e.g. 3.50">
            </div>

            <div style="margin-top: 14px;">
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    Check eligibility
                </button>
            </div>
        </form>
    </div>

    {% if results %}
        <div class="section-header">
            <div class="section-title">Matching scholarships</div>
            <div class="section-sub">
                Based on the criteria you provided.
            </div>
        </div>
        <div class="eligibility-results">
            {% for s in results %}
                <article class="eligibility-card">
                    <div class="admin-item-title">{{ s.name }}</div>
                    <div class="eligibility-meta">
                        {{ s.country }}
                        {% if s.level %} · {{ s.level }}{% endif %}
                        {% if s.deadline %} · Deadline: {{ s.deadline }}{% endif %}
                    </div>
                    <div style="margin-top: 4px;">
                        <a href="{{ url_for('scholarship_detail', sid=s.id) }}" class="btn btn-small btn-secondary">
                            View details
                        </a>
                    </div>
                </article>
            {% endfor %}
        </div>
    {% elif results is not none %}
        <p class="section-sub" style="margin-top: 16px;">
            No scholarships match your criteria yet. Try adjusting the filters.
        </p>
    {% endif %}
</div>
{% endblock %}
